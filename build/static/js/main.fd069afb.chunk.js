(this["webpackJsonplogin-and-register-app"]=this["webpackJsonplogin-and-register-app"]||[]).push([[0],{44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},72:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(37),s=a.n(c),o=(a(44),a(2)),l=(a(45),a(46),a(0)),i=a(11),d=a(7),r=(a(48),a(5)),j=a.n(r),b=a(3),h=function(e){var t=e.setLoginUser,a=Object(b.g)(),c=Object(n.useState)(!1),s=Object(o.a)(c,2),r=s[0],h=s[1],u=Object(n.useState)({email:"",password:"",type:""}),p=Object(o.a)(u,2),m=p[0],O=p[1],x=function(e){var t=e.target,a=t.name,n=t.value;O(Object(d.a)(Object(d.a)({},m),{},Object(i.a)({},a,n)))};return Object(l.jsxs)("div",{className:"login",children:[Object(l.jsx)("h1",{children:"Login"}),Object(l.jsx)("input",{type:"text",name:"email",value:m.email,onChange:x,placeholder:"Enter your Email"}),Object(l.jsx)("input",{type:"password",name:"password",value:m.password,onChange:x,placeholder:"Enter your Password"}),Object(l.jsx)("h4",{className:"m-2",children:"Are you Doctor or Patient"}),Object(l.jsxs)("div",{className:"d-flex justify-content-around p-2",children:[Object(l.jsxs)("div",{className:"form-check ",children:[Object(l.jsx)("input",{className:"form-check-input",type:"radio",name:"type",value:"doctor",onChange:x}),Object(l.jsx)("label",{className:"form-check-label",for:"flexRadioDefault1",children:"Doctor"})]}),Object(l.jsxs)("div",{className:"form-check",children:[Object(l.jsx)("input",{className:"form-check-input",type:"radio",name:"type",value:"patient",onChange:x}),Object(l.jsx)("label",{className:"form-check-label",for:"flexRadioDefault2",children:"Patient"})]})]}),Object(l.jsx)("div",{className:"button",onClick:function(){h(!0),j.a.post("http://localhost:3132/auth/login",m).then((function(e){1==e.data.status?(alert(e.data.message),h(!1),t(e.data.data),localStorage.setItem("myToken",e.data.authToken),a.push("/"),window.location.reload()):(alert(e.data.message),h(!1))})).catch((function(e){return alert("something went wrong")}))},children:r?Object(l.jsx)("div",{class:"spinner-border",role:"status",children:Object(l.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):"Login"}),Object(l.jsx)("div",{children:"or"}),Object(l.jsx)("div",{className:"button",onClick:function(){return a.push("/register")},children:"Register"})]})},u=(a(72),function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(b.g)(),r=Object(n.useState)({name:"",email:"",password:"",reEnterPassword:"",type:"",fee:""}),h=Object(o.a)(r,2),u=h[0],p=h[1],m=function(e){var t=e.target,a=t.name,n=t.value;p(Object(d.a)(Object(d.a)({},u),{},Object(i.a)({},a,n)))};return Object(l.jsxs)("div",{className:"register",children:[Object(l.jsx)("h1",{children:"Register"}),Object(l.jsx)("input",{type:"text",name:"name",value:u.name,placeholder:"Your Name",onChange:m}),Object(l.jsx)("input",{type:"text",name:"email",value:u.email,placeholder:"Your Email",onChange:m}),Object(l.jsx)("input",{type:"password",name:"password",value:u.password,placeholder:"Your Password",onChange:m}),Object(l.jsx)("input",{type:"password",name:"reEnterPassword",value:u.reEnterPassword,placeholder:"Re-enter Password",onChange:m}),Object(l.jsx)("h4",{className:"m-2",children:"Are you Doctor or Patient"}),Object(l.jsxs)("div",{className:"d-flex justify-content-around p-2",children:[Object(l.jsxs)("div",{className:"form-check ",children:[Object(l.jsx)("input",{className:"form-check-input",type:"radio",name:"type",value:"doctor",onChange:m}),Object(l.jsx)("label",{className:"form-check-label",for:"flexRadioDefault1",children:"Doctor"})]}),Object(l.jsxs)("div",{className:"form-check",children:[Object(l.jsx)("input",{className:"form-check-input",type:"radio",name:"type",value:"patient",onChange:m}),Object(l.jsx)("label",{className:"form-check-label",for:"flexRadioDefault2",children:"Patient"})]})]}),"doctor"==u.type?Object(l.jsx)("input",{type:"text",name:"fee",value:u.fee,placeholder:"Consultation fee",onChange:m}):"",Object(l.jsx)("div",{className:"button",onClick:function(){c(!0);var e=u.name,t=u.email,a=u.password,n=u.reEnterPassword,o=u.type;e&&t&&a&&a===n&&o?j.a.post("http://localhost:3132/auth/register",u).then((function(e){alert(e.data.message),c(!1),s.push("/login")})):(alert("invlid input"),c(!1))},children:a?Object(l.jsx)("div",{class:"spinner-border",role:"status",children:Object(l.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):"Register"}),Object(l.jsx)("div",{children:"or"}),Object(l.jsx)("div",{className:"button",onClick:function(){return s.push("/login")},children:"Login"})]})}),p=a(13);a(73),a(74);function m(e){var t=e.data,a=Object(n.useState)({time:"",date:"",memberId:t.id}),c=Object(o.a)(a,2),s=c[0],r=c[1],b=Object(n.useState)(!1),h=Object(o.a)(b,2),u=h[0],p=h[1],m=function(e){var a,n=e.target,c=n.value,o=n.name;r(Object(d.a)(Object(d.a)({},s),{},(a={},Object(i.a)(a,o,c),Object(i.a)(a,"doctorId",t.id),a)))};return Object(l.jsx)("div",{children:Object(l.jsx)("div",{class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(l.jsx)("div",{class:"modal-dialog",children:Object(l.jsxs)("div",{class:"modal-content",children:[Object(l.jsxs)("div",{class:"modal-header",children:[Object(l.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:"Book Appointment"}),Object(l.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){return window.location.reload()}})]}),Object(l.jsx)("div",{class:"modal-body",children:Object(l.jsx)("form",{children:Object(l.jsxs)("div",{className:"d-flex flex-column p-2",children:[Object(l.jsxs)("div",{className:"m-2",children:[Object(l.jsx)("label",{for:"date",children:"Appointment Date:"}),Object(l.jsx)("input",{type:"date",id:"appointment_date",name:"date",value:s.date,onChange:m})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{for:"time",children:"Appointment Time:"}),Object(l.jsx)("input",{type:"time",id:"appointment_date",name:"time",min:"09:00",max:"18:00",step:"15",value:s.time,onChange:m})]})]})})}),Object(l.jsx)("div",{class:"modal-footer",children:u?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h5",{className:"me-5 text-success",children:"Appointment Booked"}),Object(l.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(){return window.location.reload()},children:"Close"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(l.jsx)("button",{type:"button",class:"btn btn-primary",onClick:function(){var e={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("myToken")};j.a.post("http://localhost:3132/api/appointment",s,{headers:e}).then((function(e){var t;1==(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.status)?p(!0):alert(e.data.message)}))},children:"Book"})]})})]})})})})}function O(e){var t=e.data;return Object(l.jsx)("div",{children:Object(l.jsx)("div",{class:"modal fade",id:"deleteModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(l.jsx)("div",{class:"modal-dialog",children:Object(l.jsxs)("div",{class:"modal-content",children:[Object(l.jsxs)("div",{class:"modal-header",children:[Object(l.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:"Delete Appointment"}),Object(l.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(l.jsx)("div",{class:"modal-body",children:"Are You sure ?"}),Object(l.jsxs)("div",{class:"modal-footer",children:[Object(l.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(l.jsx)("button",{type:"button",class:"btn btn-primary",onClick:function(){var e={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("myToken")};j.a.delete("http://localhost:3132/api/appointment?appointmentId=".concat(t),{headers:e}).then((function(e){window.location.reload()}))},children:"sure"})]})]})})})})}var x=a(16);function v(e){var t=e.data,a=e.user,c=e.deleteApt,s=e.handleFunc,i=e.logOut,d=Object(n.useState)([]),r=Object(o.a)(d,2),h=r[0],u=r[1],p=(Object(b.g)(),Object(n.useState)([])),m=Object(o.a)(p,2),O=m[0],v=m[1];Object(n.useEffect)((function(){var e={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("myToken")},t=[];j.a.get("http://localhost:3132/api/appointment",{headers:e}).then((function(e){var a,n,c,s;v(null===(a=e.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.appointment);for(var o=null===(c=e.data)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.appointment,l=0;l<o.length;l++)t.push({key:l+1,value:!1});u(t)}))}),[]);return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("h1",{className:"p-3 text-center ",children:"patient"==a.userType?"Doctors list":"Appointment list"}),Object(l.jsx)("div",{children:Object(l.jsxs)("table",{className:"table",children:[Object(l.jsx)("thead",{className:"thead-dark",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"#"}),Object(l.jsx)("th",{scope:"col",children:"Name"}),Object(l.jsx)("th",{scope:"col",children:"Fees"}),Object(l.jsx)("th",{scope:"col",children:"Book Appointment"})]})}),Object(l.jsx)("tbody",{children:t.map((function(e,t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"row",children:t+1}),Object(l.jsxs)("td",{children:[" ","".concat("patient"==a.userType?"Dr.":""," ").concat(null===e||void 0===e?void 0:e.name)]}),Object(l.jsxs)("td",{children:[" ","".concat("patient"==a.userType?"$":""," ").concat(null===e||void 0===e?void 0:e.fee)]}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{className:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",onClick:function(){return s(e)},children:"Book appointment"})})]})}))})]})})]}),Object(l.jsxs)("div",{className:"row",children:["patient"==a.userType?Object(l.jsx)("h2",{className:"p-3 text-center ",children:"Your Appointments"}):"",O.length?Object(l.jsx)("div",{children:Object(l.jsxs)("table",{className:"table",children:[Object(l.jsx)("thead",{className:"thead-dark",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"#"}),Object(l.jsx)("th",{scope:"col",children:"Appointment Time (15 min)"}),Object(l.jsx)("th",{scope:"col",children:"Appointment date"}),Object(l.jsx)("th",{scope:"col",children:"Doctor"}),Object(l.jsx)("th",{scope:"col",children:"Payment Status"}),Object(l.jsx)("th",{scope:"col",children:"Appointment Status"}),Object(l.jsx)("th",{scope:"col",children:"Cancel "})]})}),Object(l.jsx)("tbody",{children:O.map((function(e,t){var n,s;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"row",children:t+1}),Object(l.jsx)("td",{children:null===e||void 0===e?void 0:e.appointment_time}),Object(l.jsx)("td",{children:null===e||void 0===e?void 0:e.appointment_date}),Object(l.jsx)("td",{children:"".concat("patient"==a.userType?"Dr.":""," ").concat(null===e||void 0===e||null===(n=e.doctor)||void 0===n?void 0:n.name)}),Object(l.jsxs)("td",{children:[null===e||void 0===e?void 0:e.payment_status," "]}),Object(l.jsx)("td",{children:null===e||void 0===e?void 0:e.approval_status}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{className:"btn btn-danger","data-bs-toggle":"modal","data-bs-target":"#deleteModal",onClick:function(){return c(e.id)},children:"cancel"})}),Object(l.jsxs)("td",{children:["not paid"==(null===e||void 0===e?void 0:e.payment_status)?Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){return function(e,t){u([].concat(Object(x.a)(h.slice(0,t)),[{key:t+1,value:!0}],Object(x.a)(h.slice(t+1))));var a={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("myToken")},n={success_url:"http://localhost:3000/dashboard",cancel_url:"http://localhost:3000",appointmentId:e};j.a.post("http://localhost:3132/patient/payment",n,{headers:a}).then((function(e){var a,n,c,s;console.log(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.url,"oat"),window.location.href=null===e||void 0===e||null===(c=e.data)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.url,u([].concat(Object(x.a)(h.slice(0,t)),[{key:t+1,value:!1}],Object(x.a)(h.slice(t+1))))}))}(null===e||void 0===e?void 0:e.id,t)},children:h.length&&(null===h||void 0===h||null===(s=h.find((function(e){return e.key==t+1})))||void 0===s?void 0:s.value)?Object(l.jsx)("div",{class:"spinner-border",role:"status",children:Object(l.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):"pay"}):""," "]})]})}))})]})}):Object(l.jsx)("h6",{className:"text-center text-danger",children:"No appointments"})]}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("button",{className:"btn btn-primary mx-auto",onClick:i,children:"log out"})})]})}function f(e){e.data;var t=e.user,a=(e.deleteApt,e.handleFunc,e.logOut),c=Object(n.useState)([]),s=Object(o.a)(c,2),i=s[0],d=s[1];Object(n.useEffect)((function(){var e={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("myToken")};j.a.get("http://localhost:3132/api/appointment",{headers:e}).then((function(e){var t,a;d(null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.appointment)}))}),[]);return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"row",children:["doctor"==t.userType?Object(l.jsx)("h2",{className:"p-3 text-center ",children:"Your Appointments"}):"",i.length?Object(l.jsx)("div",{children:Object(l.jsxs)("table",{className:"table",children:[Object(l.jsx)("thead",{className:"thead-dark",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"#"}),Object(l.jsx)("th",{scope:"col",children:"Appointment Time (15 min)"}),Object(l.jsx)("th",{scope:"col",children:"Appointment date"}),Object(l.jsx)("th",{scope:"col",children:"Payment Status"}),Object(l.jsx)("th",{scope:"col",children:"Appointment Status"}),Object(l.jsx)("th",{scope:"col",children:"Patient Name"})]})}),Object(l.jsx)("tbody",{children:i.map((function(e,t){var a;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"row",children:t+1}),Object(l.jsx)("td",{children:null===e||void 0===e?void 0:e.appointment_time}),Object(l.jsx)("td",{children:null===e||void 0===e?void 0:e.appointment_date}),Object(l.jsxs)("td",{children:[null===e||void 0===e?void 0:e.payment_status," "]}),Object(l.jsx)("td",{children:null===e||void 0===e?void 0:e.approval_status}),Object(l.jsx)("td",{children:null===e||void 0===e||null===(a=e.patient)||void 0===a?void 0:a.name}),Object(l.jsx)("td",{children:"waiting"==(null===e||void 0===e?void 0:e.approval_status)?Object(l.jsx)("button",{type:"button",className:"btn-primary btn",onClick:function(){return function(e){var t={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("myToken")};j.a.patch("http://localhost:3132/api/appointment",{appointmentId:e},{headers:t}).then((function(e){console.log(e.data,"dash"),window.location.reload()}))}(null===e||void 0===e?void 0:e.id)},children:"confirm status"}):""})]})}))})]})}):Object(l.jsx)("h6",{className:"text-center text-danger",children:"No appointments"})]}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("button",{className:"btn btn-primary mx-auto",onClick:a,children:"log out"})})]})}function g(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),d=i[0],r=i[1],b=Object(n.useState)(!0),h=Object(o.a)(b,2),u=h[0],p=h[1],x=Object(n.useState)(0),g=Object(o.a)(x,2),y=g[0],k=g[1],N=Object(n.useState)(""),w=Object(o.a)(N,2),C=w[0],A=w[1],S=function(){localStorage.removeItem("myToken"),window.location.reload()};Object(n.useEffect)((function(){var e={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("myToken")};j.a.get("http://localhost:3132/patient/get_data",{headers:e}).then((function(e){console.log(e.data,"dash"),c(e.data.doctors),r(e.data.user),p(!1)}))}),[]);return Object(l.jsx)(l.Fragment,{children:u?Object(l.jsx)("div",{class:"spinner-border",role:"status",children:Object(l.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):"patient"==d.userType?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(v,{data:a,user:d,handleFunc:function(e){k(e)},deleteApt:function(e){A(e)},logOut:S}),Object(l.jsx)(m,{data:y}),Object(l.jsx)(O,{data:C})]}):Object(l.jsx)(f,{data:a,user:d,logOut:S})})}var y=a(39),k=function(e){var t=e.auth,a=e.component,n=Object(y.a)(e,["auth","component"]);return Object(l.jsx)(b.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return t?Object(l.jsx)(a,Object(d.a)({},e)):t?void 0:Object(l.jsx)(b.a,{to:{path:"/",state:{from:e.location}}})}}))};var N=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],c=t[1],s=localStorage.getItem("myToken");return console.log(a),Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(p.a,{children:Object(l.jsxs)(b.d,{children:[Object(l.jsx)(b.b,{exact:!0,path:"/",children:s&&void 0!==s?Object(l.jsx)(b.a,{to:"/dashboard"}):Object(l.jsx)(h,{setLoginUser:c})}),Object(l.jsx)(b.b,{exact:!0,path:"/login",children:Object(l.jsx)(h,{setLoginUser:c})}),Object(l.jsx)(b.b,{path:"/register",children:Object(l.jsx)(u,{})}),Object(l.jsx)(k,{path:"/dashboard",component:g,auth:!!s})]})})})};s.a.render(Object(l.jsx)(N,{}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.fd069afb.chunk.js.map